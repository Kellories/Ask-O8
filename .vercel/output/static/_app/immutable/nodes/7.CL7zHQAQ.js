import{e as c,a as n,t as f,b as D,r as G}from"../chunks/disclose-version.0l5ZSCYr.js";import{i as H}from"../chunks/legacy.BxTldWZS.js";import{p as I,l as K,d as Q,t as V,a as W,g as o,s as a,c as i,r as d,e as b,b as h}from"../chunks/utils.C5S0ZuWa.js";import{i as m}from"../chunks/if.Dz3LUtzn.js";import{s as M}from"../chunks/class.BT_6QCHk.js";import{b as X}from"../chunks/input.Bt6C-Zmp.js";import{s as Y,a as Z}from"../chunks/store.DHcqW628.js";import{p as ee}from"../chunks/stores.Dznn8Nsn.js";import{g as N}from"../chunks/entry.BIW_gc5k.js";var te=f('<p class="text-red-500 mb-4"></p>'),ae=f('<textarea placeholder="Enter your content here..." rows="6" class="w-full mt-4 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"></textarea>'),re=f('<div class="mt-4"><label for="pdf-upload" class="block text-sm font-medium text-gray-700">Upload PDF</label> <input id="pdf-upload" type="file" accept=".pdf" class="mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border file:border-gray-300 file:text-sm file:font-semibold file:bg-gray-100 file:text-gray-700 hover:file:bg-gray-200"></div>'),oe=f('<main class="p-6 bg-gray-50 min-h-screen flex flex-col items-center"><div class="w-full max-w-lg bg-white p-6 rounded-md shadow-md"><h1 class="text-2xl font-bold text-gray-800 mb-4">Create New Content</h1> <!> <div class="mb-4"><label class="block text-sm font-medium text-gray-700">Choose Creation Method</label> <div class="mt-2 flex space-x-4"><button>Text</button> <button>Upload PDF</button></div></div> <!> <!> <button class="mt-4 w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200"><!></button> <button class="mt-2 w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition duration-200">Cancel</button></div></main>');function me(O,R){I(R,!1);const A=Y(),g=()=>Z(ee,"$page",A);let w=h(""),u=h(""),s=h("text"),k=!1,C="",$,S;const B=async()=>{try{const t={input:o(u)||null,fileString:$||null,fileType:S||"text",knowledgebaseid:g().params.slug},e=await fetch("/api/storeEmbedding",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const _=await e.json();throw new Error(_.message||"Failed to create embedding.")}const{embedding:r,text:l}=await e.json();console.log("Embedding created successfully:",r),console.log("Extracted text:",l),N(`/app/knowledge/${g().params.slug}`)}catch(t){console.error("Error creating embedding:",t.message)}},J=t=>new Promise((e,r)=>{const l=new FileReader;l.onload=()=>e(l.result.split(",")[1]),l.onerror=_=>r(_),l.readAsDataURL(t)}),L=async t=>{$=await J(t),S="pdf"};K(()=>g(),()=>{b(w,g().params.slug)}),Q(),H();var x=oe(),E=i(x),F=a(i(E),2);m(F,()=>C,t=>{var e=te();e.textContent=C,n(t,e)});var v=a(F,2),T=a(i(v),2),y=i(T),P=a(y,2);d(T),d(v);var U=a(v,2);m(U,()=>o(s)==="text",t=>{var e=ae();G(e),X(e,()=>o(u),r=>b(u,r)),n(t,e)});var j=a(U,2);m(j,()=>o(s)==="pdf",t=>{var e=re(),r=a(i(e),2);d(e),c("change",r,L),n(t,e)});var p=a(j,2);p.disabled=k;var q=i(p);m(q,()=>k,t=>{var e=D("Saving...");n(t,e)},t=>{var e=D("Save Content");n(t,e)}),d(p);var z=a(p,2);d(E),d(x),V(()=>{M(y,`px-4 py-2 rounded-lg transition duration-200 ${o(s)==="text"?"text-blue-600 bg-blue-100":"text-gray-600 bg-gray-100"}`),M(P,`px-4 py-2 rounded-lg transition duration-200 ${o(s)==="pdf"?"text-blue-600 bg-blue-100":"text-gray-600 bg-gray-100"}`)}),c("click",y,()=>b(s,"text")),c("click",P,()=>b(s,"pdf")),c("click",p,B),c("click",z,()=>N(`/app/knowledge/${o(w)}`)),n(O,x),W()}export{me as component};
